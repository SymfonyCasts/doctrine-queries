# JOINs

Coming soon...

Until then, here is the legacy version: https://symfonycasts.com/screencast/doctrine-queries-legacy/joins

Alright, so we've got this cool `search()` method where we're searching on `name` or the `iconKey` inside of our `Category` entity. But could we also search on the fortunes themselves inside of a category? Well first let's look at how that relationship is set up. So in `Category`, you can see that there's a one-to-many relationship on a property called `fortuneCookies` over to the `FortuneCookie` entity. So if you think about this from a database perspective, if we want to modify our where clause to be able to say `AND WHERE fortuneCookie.fortune = something`, we need to join over to that table. So we're going to do the same thing with Doctrine, except once again we're not going to think about joining across tables, we're going to think about joining across entity classes which is a little weird but it's really cool. So we're actually going to join across this `fortuneCookies` property over to the `FortuneCookie` entity, and then we'll be able to add our `WHERE` clause. So this is awesome. 

We're just making the properties on our fortune cookie available inside of our query. So this means I'm going to take my `andWhere` and make it even longer. Now we can say `OR fortuneCookie.fortune LIKE :searchTerm`. It's that easy. So let's say I have "conclusion" in one of these, so I'm going to go over here, search for "conclusion" on the homepage, and got it. Proverbs it says that it matches at least one of those. And like usual on the homepage, we can see the queries. I'm going to click to open that up in a new window, and you can see that there are two queries here. The first one is actually for the category, see `from category`. And the second query is actually from `fortuneCookie`. If we repeated this and actually went to the home page, we see there are seven queries in total, one for all of the categories and then an additional one to find all of the fortune cookies in each category. So first category, second category, and third category. Let's find out why that's happening next and how we can fix it.
