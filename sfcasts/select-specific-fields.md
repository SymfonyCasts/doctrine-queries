# Selecting Specific Fields

Coming soon...

Let's keep adding more stuff to this page. How about the average number of fortune cookies that have been printed in this category? I'm going to go right back to our query here. It's called `countNumberPrintedForCategory()`, but let's start adding more stuff to it. I could actually just say comma here and then use the average function to select more. Or we can just use `addSelect` and just spread that out into two lines. Again, this is going to look pretty similar. We're going to use the `AVG` average function, `fortuneCookie.numberPrinted`, and then I'll say `fortunesAverage`. Notice I didn't use the word as here. I'm just showing off that that's totally optional. In fact, this entire thing is optional. I can just leave that off. But by giving it a name like this, it gives me control over what key is going to be returned in the array that you'll see in a second. I do like it. Then while we're here, we can grab whatever data we want. Maybe instead of printing out this name from the category object, let's see if we can grab a category name right here. I'll say `addSelect('category.name')`. You probably see a problem with that. If you do, you're correct. Let's ignore it for a second and let's see what this gives us back. Before it was giving us back just the fortunes printed, but now we're selecting three things, not just one. What's it going to return this time? The answer to start is a gigantic error. It says error category is not defined. If you were watching closely, you probably noticed referencing category, but we haven't joined over to that. Remember, we're querying from the fortune cookie entity and it has a category property. We're going to join from the one or many fortune cookies to one category. In this case, we want an inner join. I'll say arrow `innerJoin('fortuneCookie.category', 'category')`. All right, refresh the page now. This is the error I was expecting. The query returned a row containing multiple columns. This `getSingleScalarResult()` is perfect when what you return is a single row and a single column.
As soon as you're returning multiple columns, `getSingleScalarResult()` is not going to work. We're going to change that to `getSingleResult()`. It's basically saying, give me the one row of data that's going to come back. If we try this, that's what we expect. You can see we've got those three columns exactly that we were selecting. Let's change this method a little bit. It now returns an array. Down here, it's not going to be an int. We're just going to return `result`. We can remove our `dd`. You can just put the return up here if you wanted to. Let's go back now and fix our controller. Fortune's printed is not quite right. Let's call that `result`. Maybe you can think of a better name than me. Then we'll just use some array keys here. `Result['fortunePrinted']`, and we'll also have a `result['fortunesAverage']`. Then finally, `categoryName`. We didn't really need a query for that, but we got it. `Result['name']`. Now over in our `showCategory` template, remember we're passing the entire category object in, which is how we're printing the `category.name`. But now we're also passing in a `categoryName` variable. I'm just going to replace this `category.name` with `categoryName`. There's no actual reason for me to do that. If I had also selected `iconKey`, then we wouldn't even need the category variable anymore. In that case, this first query here for categories joined to fortune cookies, we could just change that to a query that just queries for the fortune cookies and not the category data, since we'll have grabbed the category data in this other query. It's a bit of an optimization. Don't go overboard with that. But since I did query for the category name here, I'm just showing off that we're going to be able to use that directly. And then down here for the print history, I'm going to hit enter and it'll say `{{ fortunesAverage|number_format }}` average. Awesome. And if I didn't make any mistakes, got it. There we go. Everything works. And we've got our two queries here. The one for the category that's joined over to our fortune cookies. And then the one that we just made, we just grabbed the sum, the average and the name with our join. Love it. So yeah, getting back objects from Doctrine is the best ideal situation because objects are just really nice to work with. But at the end of the day, if you ever need to query for certain random data or fields, you can totally do that. And Doctrine is going to give you back a very simple associative array. But it's also kind of the, but even in that case, we can go one step further and we could ask Doctrine to return us this random data inside an object. Let's talk about that next.
